
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Technical documentation to enable (and demo) change data capture pattern on OpenShift">
      
      
      
      
        <link rel="prev" href="install_and_configure_the_operators.html">
      
      
        <link rel="next" href="decompose_the_monolith.html">
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>Configure platform - Tech docs: Change data capture</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.6f8fc17f.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#wrap-up-operator-config" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="Tech docs: Change data capture" class="md-header__button md-logo" aria-label="Tech docs: Change data capture" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Tech docs: Change data capture
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Configure platform
            
          </span>
        </div>
      </div>
    </div>
    
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Tech docs: Change data capture" class="md-nav__button md-logo" aria-label="Tech docs: Change data capture" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Tech docs: Change data capture
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="install_and_configure_the_operators.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Install operators
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Configure platform
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="wrap_up_operator_config.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Configure platform
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#dev-spaces" class="md-nav__link">
    <span class="md-ellipsis">
      Dev spaces
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metadata-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Metadata configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amq-streams-kafka" class="md-nav__link">
    <span class="md-ellipsis">
      AMQ Streams - Kafka
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openshift-serverless-knative" class="md-nav__link">
    <span class="md-ellipsis">
      OpenShift serverless - Knative
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="decompose_the_monolith.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Decompose the monolith with CDC
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="cdc-based-example.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CDC integration example
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#dev-spaces" class="md-nav__link">
    <span class="md-ellipsis">
      Dev spaces
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metadata-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Metadata configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amq-streams-kafka" class="md-nav__link">
    <span class="md-ellipsis">
      AMQ Streams - Kafka
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openshift-serverless-knative" class="md-nav__link">
    <span class="md-ellipsis">
      OpenShift serverless - Knative
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="wrap-up-operator-config">Wrap up operator config<a class="headerlink" href="#wrap-up-operator-config" title="Permanent link">&para;</a></h1>
<p><em>source: <a href="https://github.com/maarten-vandeperre/knative-serverless-example-workshop/tree/main/tutorial">https://github.com/maarten-vandeperre/knative-serverless-example-workshop/tree/main/tutorial</a></em></p>
<ol>
<li><a href="#dev-spaces">Dev spaces</a></li>
<li><a href="#metadata-configuration">Metadata configuration</a></li>
<li><a href="#amq-streams---kafka">AMQ Streams - Kafka</a></li>
<li><a href="#openshift-serverless---knative">OpenShift serverless - Knative</a></li>
</ol>
<h2 id="dev-spaces">Dev spaces<a class="headerlink" href="#dev-spaces" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Open specifications tab.<br />
<img alt="" src="img/2_configure_dev_spaces_1.png" title="" /></p>
</li>
<li>
<p>Click "create Che cluster":<br />
<em>A cloud development environment (CDE) service for OpenShift.
   Built on the open source Eclipse Che project, Red Hat OpenShift Dev Spaces uses Kubernetes and containers
   to provide developers and other IT team members with a consistent, secure, and zero-configuration development environment.</em>
   <img alt="" src="img/2_create_dev_spaces_2.png" title="" /></p>
</li>
<li>
<p>Create Che cluster with default settings.
   <img alt="" src="img/2_create_dev_spaces_3.png" title="" /></p>
</li>
<li>
<p>Select the route for your OpenShift dev space (it can take some minutes for this to pop up). 
   <img alt="" src="img/2_dev_spaces_route.png" title="" />
   Or
   <img alt="" src="img/2_dev_spaces_route2.png" title="" /></p>
</li>
<li>
<p>Click "Login with OpenShift".
   <img alt="" src="img/2_dev_spaces_login_screen.png" title="" /></p>
</li>
<li>
<p>Fill in login credentials.
   <img alt="" src="img/5_configure_dev_spaces_1_log_in.png" title="" /></p>
</li>
<li>
<p>Allow the selected permissions.
   <img alt="" src="img/5_configure_dev_spaces_2.png" title="" /></p>
</li>
<li>
<p>Link the current workshop GitHub repository (<a href="https://github.com/maarten-vandeperre/knative-serverless-example-workshop">https://github.com/maarten-vandeperre/knative-serverless-example-workshop</a>). 
   <img alt="" src="img/5_configure_dev_spaces_3_workspace.png" title="" /></p>
</li>
<li>
<p>Wait for the provisioning of the workspace (can take some minutes as well).<br />
<img alt="" src="img/5_configure_dev_spaces_4_provisioning.png" title="" /></p>
</li>
<li>
<p>Open a terminal and start exploring. E.g.,<br />
      <div class="language-shell highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>oc<span class="w"> </span>whoami
</code></pre></div></td></tr></table></div>
      <div class="language-shell highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>oc<span class="w"> </span>get<span class="w"> </span>pod
</code></pre></div></td></tr></table></div>
      <img alt="" src="img/5_configure_dev_spaces_5.png" title="" /></p>
</li>
</ol>
<h2 id="metadata-configuration">Metadata configuration<a class="headerlink" href="#metadata-configuration" title="Permanent link">&para;</a></h2>
<ol>
<li>Make sure you're using the created project<br />
   <div class="language-shell highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>oc<span class="w"> </span>project<span class="w"> </span>demo-project
</code></pre></div></td></tr></table></div></li>
<li>Change the content of the tutorial/scripts/.namespace file (in the dev spaces workspace) to your 
project name. <em>For us, it is "demo-project"</em></li>
<li>Change the content of the tutorial/scripts/.root_domain file (in the dev spaces workspace) to your
   base domain from the OpenShift sandbox. <em>For us, it is "apps.cluster-gq27g.gq27g.sandbox3037.opentlc.com"</em>
   <img alt="" src="img/base_domain.png" title="" /></li>
<li>Do a find and replace on the domain
   <img alt="" src="img/replace_in_files_1.png" title="" />
   <img alt="" src="img/replace_in_files_2.png" title="" /></li>
<li>Fetch a Quay.io CLI secret in order to execute docker push commands to your Quay repository (will be required for debezium).
      1. Go to quay.io.
         <img alt="" src="img/quay_1_select_user.png" title="" />
      2. Go to user settings.
         <img alt="" src="img/quay_2_go_to_user_settings.png" title="" />
      3. Click "generate encrypted password"
         <img alt="" src="img/quay_3_generate_encrypted_password.png" title="" />
      4. Go to Docker config and view the password.
         <img alt="" src="img/quay_passwd.png" title="" />
      5. Store the encrypted password in rh-ee-mvandepe-auth.json file in the root of the project.
         (i.e., replace <to be replaced> with it).
      6. Store configuration in a secret
         <div class="language-shell highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">   </span>oc<span class="w"> </span>create<span class="w"> </span>secret<span class="w"> </span>generic<span class="w"> </span><span class="se">\</span>
<span class="w">       </span>kafka-connect-cluster-push-secret<span class="w"> </span><span class="se">\</span>
<span class="w">       </span>--from-file<span class="o">=</span>.dockerconfigjson<span class="o">=</span>./rh-ee-mvandepe-auth.json<span class="w"> </span><span class="se">\</span>
<span class="w">       </span>--type<span class="o">=</span>kubernetes.io/dockerconfigjson
</code></pre></div></td></tr></table></div></li>
</ol>
<h2 id="amq-streams-kafka">AMQ Streams - Kafka<a class="headerlink" href="#amq-streams-kafka" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Open Kafka tab.<br />
<img alt="" src="img/3_configure_kafka_1.png" title="" /></p>
</li>
<li>
<p>Click "create Kafka" (in the current namespace).
   <img alt="" src="img/3_configure_kafka_2.png" title="" /></p>
</li>
<li>
<p>Click "create Kafka with default settings".<br />
<img alt="" src="img/3_configure_kafka_3.png" title="" /></p>
</li>
<li>
<p>Check for resources to be provisioned.
   <img alt="" src="img/3_configure_kafka_4_resources.png" title="" /></p>
</li>
<li>
<p>When all resources are available, the cluster status should reach the ready state.
   <img alt="" src="img/3_configure_kafka_5_status_ready.png" title="" /></p>
</li>
<li>
<p>Create the Kafka connect cluster (Debezium connector):<br />
<strong>!!! Make sure that you have configured the metadata as described in previous section !!!</strong><br />
<em>Execute the following command in the terminal of the dev space, in the project root:</em><br />
   <div class="language-shell highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>sh<span class="w"> </span>tutorial/scripts/01_script.sh
</code></pre></div></td></tr></table></div></p>
</li>
<li>
<p>Created Kafka Connect cluster should be visible in the UI.
   <img alt="" src="img/3_configure_kafka_6_kafka_connect_1.png" title="" /></p>
</li>
</ol>
<h2 id="openshift-serverless-knative">OpenShift serverless - Knative<a class="headerlink" href="#openshift-serverless-knative" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Open "Knative Eventing" tab.<br />
<img alt="" src="img/2_configure_serverless_eventing_1.png" title="" /></p>
</li>
<li>
<p>Click "create Knative eventing".<br />
<strong>!!! This should be created in the "knative-eventing" namespace !!!</strong>
   <img alt="" src="img/2_configure_serverless_eventing_2.png" title="" /></p>
</li>
<li>
<p>Open "Knative Serving" tab. <br />
<img alt="" src="img/2_configure_serverless_serving_1.png" title="" /></p>
</li>
<li>
<p>Click "create Knative serving".<br />
<strong>!!! This should be created in the "knative-serving" namespace !!!</strong>
   <img alt="" src="img/2_configure_serverless_serving_2.png" title="" /></p>
</li>
<li>
<p>Create with default values.
   <img alt="" src="img/2_configure_serverless_serving_3.png" title="" /></p>
</li>
<li>
<p>When all resources are provisioned, you should be able to see the serverless section for all namespaces.<br />
   We'll check for our "demo-project" namespace.
   <img alt="" src="img/2_serverless_validate_eventing_and_serving.png" title="" /></p>
</li>
<li>
<p>Open "Knative Kafka" tab.<br />
<img alt="" src="img/4_configure_knative_kafka.png" title="" /></p>
</li>
<li>
<p>Create the Knative Kafka cluster. !!! list all the brokers (from the namespaces) you want to use for broker and channel and enable source and sink. 
 If you followed our namings, 
it should be:<br />
   <div class="language-shell highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>my-cluster-kafka-bootstrap.demo-project.svc.cluster.local:9092
</code></pre></div></td></tr></table></div>
   <img alt="" src="img/4_configure_knative_kafka_2_channel.png" title="" />
   <img alt="" src="img/4_configure_knative_kafka_2_broker.png" title="" />
   <img alt="" src="img/4_configure_knative_kafka_2_source_and_sink.png" title="" /></p>
</li>
</ol>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="install_and_configure_the_operators.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Install operators">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Install operators
              </div>
            </div>
          </a>
        
        
          
          <a href="decompose_the_monolith.html" class="md-footer__link md-footer__link--next" aria-label="Next: Decompose the monolith with CDC">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Decompose the monolith with CDC
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": ["navigation.footer", "content.action.edit"], "search": "assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
        <script src="search/main.js"></script>
      
    
  </body>
</html>